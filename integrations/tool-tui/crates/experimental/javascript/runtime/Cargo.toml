[package]
name = "dx-js-runtime"
version = "0.0.1"
edition = "2021"
authors = ["Dx Team"]
license = "MIT"
repository = "https://github.com/example/dx"
description = "A high-performance JavaScript/TypeScript runtime with JIT compilation"
keywords = ["javascript", "typescript", "runtime", "jit", "compiler"]
categories = ["compilers", "development-tools"]

# Make this crate its own workspace root
[workspace]
package.version = "0.0.1"

[features]
default = ["simd"]
simd = []
io_uring = ["dep:io-uring"]
gpu = ["dep:wgpu"]
full = ["simd", "io_uring", "gpu"]

[dependencies]
# OXC - JavaScript/TypeScript parser
oxc_parser = "0.49"
oxc_ast = "0.49"
oxc_span = "0.49"
oxc_allocator = "0.49"
oxc_diagnostics = "0.49"
oxc_syntax = "0.49"

# Cranelift - Fast code generation
cranelift = "0.116"
cranelift-codegen = "0.116"
cranelift-frontend = "0.116"
cranelift-jit = "0.116"
cranelift-module = "0.116"
cranelift-native = "0.116"
target-lexicon = "0.12"

# Memory management
bumpalo = { version = "3.16", features = ["collections"] }
memmap2 = "0.9"
bytemuck = { version = "1.21", features = ["derive"] }

# Hashing
xxhash-rust = { version = "0.8", features = ["xxh3"] }
blake3 = "1.5"

# Serialization
postcard = { version = "1.1", features = ["alloc"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
bincode = "1.3"
ryu = "1.0"
itoa = "1.0"

# Concurrency
parking_lot = "0.12"
crossbeam = "0.8"

# Async (optional io_uring)
tokio = { version = "1.43", features = [
    "rt-multi-thread",
    "fs",
    "io-util",
    "macros",
] }
io-uring = { version = "0.7", optional = true }

# GPU (optional)
wgpu = { version = "24", optional = true }

# Error handling
thiserror = "2.0"
anyhow = "1.0"

# Console output (colored errors)
console = "0.15"

# BigInt support
num-bigint = "0.4"
num-traits = "0.2"

# Utilities
num_cpus = "1.16"
hex = "0.4"
sha1 = "0.10"
base64 = "0.22"
regex-lite = "0.1"

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }
tempfile = "3.15"
proptest = "1.4"

[[bench]]
name = "runtime"
harness = false

[[bench]]
name = "runtime_bench"
harness = false

[[bin]]
name = "dx-js"
path = "src/bin/main.rs"
