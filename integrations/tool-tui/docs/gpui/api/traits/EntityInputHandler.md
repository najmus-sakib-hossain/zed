EntityInputHandler in gpui - Rust

[Docs.rs](/)

* [gpui-0.2.2](# "Zed's GPU-accelerated UI framework")

  + gpui 0.2.2
  + [Docs.rs crate page](/crate/gpui/0.2.2 "See gpui in docs.rs")
  + [Apache-2.0](https://spdx.org/licenses/Apache-2.0)

  + Links
  + [Homepage](https://gpui.rs)
  + [Repository](https://github.com/zed-industries/zed)
  + [crates.io](https://crates.io/crates/gpui "See gpui in crates.io")
  + [Source](/crate/gpui/0.2.2/source/ "Browse source of gpui-0.2.2")

  + Owners
  + [maxbrunsfeld](https://crates.io/users/maxbrunsfeld)
  + [mikayla-maki](https://crates.io/users/mikayla-maki)
  + [github:zed-industries:crates-io](https://crates.io/teams/github:zed-industries:crates-io)

  + Dependencies
  + - [anyhow ^1.0.86
      *normal*](/anyhow/^1.0.86/)
    - [async-task ^4.7
      *normal*](/async-task/^4.7/)
    - [backtrace ^0.3
      *normal*
      *optional*](/backtrace/^0.3/)
    - [blade-graphics ^0.7.0
      *normal*
      *optional*](/blade-graphics/^0.7.0/)
    - [blade-macros ^0.3.0
      *normal*
      *optional*](/blade-macros/^0.3.0/)
    - [blade-util ^0.3.0
      *normal*
      *optional*](/blade-util/^0.3.0/)
    - [bytemuck ^1
      *normal*
      *optional*](/bytemuck/^1/)
    - [gpui\_collections ^0.2.2
      *normal*](/gpui_collections/^0.2.2/)
    - [ctor ^0.4.0
      *normal*](/ctor/^0.4.0/)
    - [derive\_more ^0.99.17
      *normal*](/derive_more/^0.99.17/)
    - [etagere ^0.2
      *normal*](/etagere/^0.2/)
    - [futures ^0.3
      *normal*](/futures/^0.3/)
    - [gpui-macros ^0.2.2
      *normal*](/gpui-macros/^0.2.2/)
    - [gpui\_http\_client ^0.2.2
      *normal*](/gpui_http_client/^0.2.2/)
    - [image ^0.25.1
      *normal*](/image/^0.25.1/)
    - [inventory ^0.3.19
      *normal*](/inventory/^0.3.19/)
    - [itertools ^0.14.0
      *normal*](/itertools/^0.14.0/)
    - [libc ^0.2
      *normal*](/libc/^0.2/)
    - [log ^0.4.16
      *normal*](/log/^0.4.16/)
    - [lyon ^1.0
      *normal*](/lyon/^1.0/)
    - [num\_cpus ^1.13
      *normal*](/num_cpus/^1.13/)
    - [parking ^2.0.0
      *normal*](/parking/^2.0.0/)
    - [parking\_lot ^0.12.1
      *normal*](/parking_lot/^0.12.1/)
    - [pin-project ^1.1.10
      *normal*](/pin-project/^1.1.10/)
    - [postage ^0.5
      *normal*](/postage/^0.5/)
    - [profiling ^1
      *normal*](/profiling/^1/)
    - [rand ^0.9
      *normal*
      *optional*](/rand/^0.9/)
    - [raw-window-handle ^0.6
      *normal*](/raw-window-handle/^0.6/)
    - [gpui\_refineable ^0.2.2
      *normal*](/gpui_refineable/^0.2.2/)
    - [resvg ^0.45.0
      *normal*](/resvg/^0.45.0/)
    - [schemars ^1.0
      *normal*](/schemars/^1.0/)
    - [seahash ^4.1
      *normal*](/seahash/^4.1/)
    - [gpui\_semantic\_version ^0.2.2
      *normal*](/gpui_semantic_version/^0.2.2/)
    - [serde ^1.0.221
      *normal*](/serde/^1.0.221/)
    - [serde\_json ^1.0.144
      *normal*](/serde_json/^1.0.144/)
    - [slotmap ^1.0.6
      *normal*](/slotmap/^1.0.6/)
    - [smallvec ^1.6
      *normal*](/smallvec/^1.6/)
    - [smol ^2.0
      *normal*](/smol/^2.0/)
    - [stacksafe ^0.1
      *normal*](/stacksafe/^0.1/)
    - [strum ^0.27.2
      *normal*](/strum/^0.27.2/)
    - [gpui\_sum\_tree ^0.2.2
      *normal*](/gpui_sum_tree/^0.2.2/)
    - [taffy =0.9.0
      *normal*](/taffy/=0.9.0/)
    - [thiserror ^2.0.12
      *normal*](/thiserror/^2.0.12/)
    - [usvg ^0.45.0
      *normal*](/usvg/^0.45.0/)
    - [gpui\_util ^0.2.2
      *normal*](/gpui_util/^0.2.2/)
    - [gpui\_util\_macros ^0.2.2
      *normal*](/gpui_util_macros/^0.2.2/)
    - [uuid ^1.1.2
      *normal*](/uuid/^1.1.2/)
    - [waker-fn ^1.2.0
      *normal*](/waker-fn/^1.2.0/)
    - [backtrace ^0.3
      *dev*](/backtrace/^0.3/)
    - [gpui\_collections ^0.2.2
      *dev*](/gpui_collections/^0.2.2/)
    - [env\_logger ^0.11
      *dev*](/env_logger/^0.11/)
    - [gpui\_http\_client ^0.2.2
      *dev*](/gpui_http_client/^0.2.2/)
    - [lyon ^1.0
      *dev*](/lyon/^1.0/)
    - [pretty\_assertions ^1.3.0
      *dev*](/pretty_assertions/^1.3.0/)
    - [rand ^0.9
      *dev*](/rand/^0.9/)
    - [unicode-segmentation ^1.10
      *dev*](/unicode-segmentation/^1.10/)
    - [gpui\_util ^0.2.2
      *dev*](/gpui_util/^0.2.2/)
    - [as-raw-xcb-connection ^1
      *normal*
      *optional*](/as-raw-xcb-connection/^1/)
    - [ashpd ^0.11
      *normal*
      *optional*](/ashpd/^0.11/)
    - [blade-graphics ^0.7.0
      *normal*
      *optional*](/blade-graphics/^0.7.0/)
    - [blade-macros ^0.3.0
      *normal*
      *optional*](/blade-macros/^0.3.0/)
    - [blade-util ^0.3.0
      *normal*
      *optional*](/blade-util/^0.3.0/)
    - [bytemuck ^1
      *normal*
      *optional*](/bytemuck/^1/)
    - [calloop ^0.13.0
      *normal*](/calloop/^0.13.0/)
    - [calloop-wayland-source ^0.3.0
      *normal*
      *optional*](/calloop-wayland-source/^0.3.0/)
    - [cosmic-text ^0.14.0
      *normal*
      *optional*](/cosmic-text/^0.14.0/)
    - [filedescriptor ^0.8.2
      *normal*
      *optional*](/filedescriptor/^0.8.2/)
    - [flume ^0.11
      *normal*](/flume/^0.11/)
    - [zed-font-kit ^0.14.1-zed
      *normal*
      *optional*](/zed-font-kit/^0.14.1-zed/)
    - [oo7 ^0.5.0
      *normal*](/oo7/^0.5.0/)
    - [open ^5.2.0
      *normal*
      *optional*](/open/^5.2.0/)
    - [wayland-backend ^0.3.3
      *normal*
      *optional*](/wayland-backend/^0.3.3/)
    - [wayland-client ^0.31.2
      *normal*
      *optional*](/wayland-client/^0.31.2/)
    - [wayland-cursor ^0.31.1
      *normal*
      *optional*](/wayland-cursor/^0.31.1/)
    - [wayland-protocols ^0.31.2
      *normal*
      *optional*](/wayland-protocols/^0.31.2/)
    - [wayland-protocols-plasma ^0.2.0
      *normal*
      *optional*](/wayland-protocols-plasma/^0.2.0/)
    - [x11-clipboard ^0.9.3
      *normal*
      *optional*](/x11-clipboard/^0.9.3/)
    - [x11rb ^0.13.1
      *normal*
      *optional*](/x11rb/^0.13.1/)
    - [zed-xim ^0.4.0-zed
      *normal*
      *optional*](/zed-xim/^0.4.0-zed/)
    - [xkbcommon ^0.8.0
      *normal*
      *optional*](/xkbcommon/^0.8.0/)
    - [naga ^25.0
      *build*](/naga/^25.0/)
    - [pathfinder\_geometry ^0.5
      *normal*](/pathfinder_geometry/^0.5/)
    - [zed-scap ^0.0.8-zed
      *normal*
      *optional*](/zed-scap/^0.0.8-zed/)
    - [block ^0.1
      *normal*](/block/^0.1/)
    - [cocoa =0.26.0
      *normal*](/cocoa/=0.26.0/)
    - [cocoa-foundation =0.2.0
      *normal*](/cocoa-foundation/=0.2.0/)
    - [core-foundation =0.10.0
      *normal*](/core-foundation/=0.10.0/)
    - [core-foundation-sys ^0.8.6
      *normal*](/core-foundation-sys/^0.8.6/)
    - [core-graphics ^0.24
      *normal*](/core-graphics/^0.24/)
    - [core-text ^21
      *normal*](/core-text/^21/)
    - [core-video ^0.4.3
      *normal*](/core-video/^0.4.3/)
    - [zed-font-kit ^0.14.1-zed
      *normal*
      *optional*](/zed-font-kit/^0.14.1-zed/)
    - [foreign-types ^0.5
      *normal*](/foreign-types/^0.5/)
    - [log ^0.4.16
      *normal*](/log/^0.4.16/)
    - [gpui\_media ^0.2.2
      *normal*](/gpui_media/^0.2.2/)
    - [metal ^0.29
      *normal*](/metal/^0.29/)
    - [objc ^0.2
      *normal*](/objc/^0.2/)
    - [objc2 ^0.6
      *normal*
      *optional*](/objc2/^0.6/)
    - [objc2-metal ^0.3
      *normal*
      *optional*](/objc2-metal/^0.3/)
    - [bindgen ^0.71
      *build*](/bindgen/^0.71/)
    - [cbindgen ^0.28.0
      *build*](/cbindgen/^0.28.0/)
    - [naga ^25.0
      *build*](/naga/^25.0/)
    - [flume ^0.11
      *normal*](/flume/^0.11/)
    - [rand ^0.9
      *normal*](/rand/^0.9/)
    - [windows ^0.61
      *normal*](/windows/^0.61/)
    - [windows-core ^0.61
      *normal*](/windows-core/^0.61/)
    - [windows-numerics ^0.2
      *normal*](/windows-numerics/^0.2/)
    - [windows-registry ^0.5
      *normal*](/windows-registry/^0.5/)
    - [embed-resource ^3.0
      *build*](/embed-resource/^3.0/)

  + Versions

  + [**100%**
    of the crate is documented](/crate/gpui/0.2.2)
* [Platform](#)
  + [x86\_64-unknown-linux-gnu](/crate/gpui/0.2.2/target-redirect/gpui/trait.EntityInputHandler.html)
* [Feature flags](/crate/gpui/0.2.2/features "Browse available feature flags of gpui-0.2.2")

* [docs.rs](#)
  + [About docs.rs](/about)
  + [Badges](/about/badges)
  + [Builds](/about/builds)
  + [Metadata](/about/metadata)
  + [Shorthand URLs](/about/redirections)
  + [Download](/about/download)
  + [Rustdoc JSON](/about/rustdoc-json)
  + [Build queue](/releases/queue)
  + [Privacy policy](https://foundation.rust-lang.org/policies/privacy-policy/#docs.rs)

* [Rust](#)
  + [Rust website](https://www.rust-lang.org/)
  + [The Book](https://doc.rust-lang.org/book/)
  + [Standard Library API Reference](https://doc.rust-lang.org/std/)
  + [Rust by Example](https://doc.rust-lang.org/rust-by-example/)
  + [The Cargo Guide](https://doc.rust-lang.org/cargo/guide/)
  + [Clippy Documentation](https://doc.rust-lang.org/nightly/clippy)

[EntityInputHandler](#)
-----------------------

[gpui](../gpui/index.html)0.2.2
-------------------------------

[EntityInputHandler](#)
-----------------------

### [Required Methods](#required-methods)

* [bounds\_for\_range](#tymethod.bounds_for_range "bounds_for_range")
* [character\_index\_for\_point](#tymethod.character_index_for_point "character_index_for_point")
* [marked\_text\_range](#tymethod.marked_text_range "marked_text_range")
* [replace\_and\_mark\_text\_in\_range](#tymethod.replace_and_mark_text_in_range "replace_and_mark_text_in_range")
* [replace\_text\_in\_range](#tymethod.replace_text_in_range "replace_text_in_range")
* [selected\_text\_range](#tymethod.selected_text_range "selected_text_range")
* [text\_for\_range](#tymethod.text_for_range "text_for_range")
* [unmark\_text](#tymethod.unmark_text "unmark_text")

### [Dyn Compatibility](#dyn-compatibility)

### [Implementors](#implementors)

[In crate gpui](index.html)
---------------------------

[gpui](index.html)

Trait EntityInputHandler Copy item path
=======================================

[Source](../src/gpui/input.rs.html#10-73)

```
pub trait EntityInputHandler: 'static + Sized {
    // Required methods
    fn text_for_range(
        &mut self,
        range: Range<usize>,
        adjusted_range: &mut Option<Range<usize>>,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    ) -> Option<String>;
    fn selected_text_range(
        &mut self,
        ignore_disabled_input: bool,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    ) -> Option<UTF16Selection>;
    fn marked_text_range(
        &self,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    ) -> Option<Range<usize>>;
    fn unmark_text(&mut self, window: &mut Window, cx: &mut Context<'_, Self>);
    fn replace_text_in_range(
        &mut self,
        range: Option<Range<usize>>,
        text: &str,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    );
    fn replace_and_mark_text_in_range(
        &mut self,
        range: Option<Range<usize>>,
        new_text: &str,
        new_selected_range: Option<Range<usize>>,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    );
    fn bounds_for_range(
        &mut self,
        range_utf16: Range<usize>,
        element_bounds: Bounds<Pixels>,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    ) -> Option<Bounds<Pixels>>;
    fn character_index_for_point(
        &mut self,
        point: Point<Pixels>,
        window: &mut Window,
        cx: &mut Context<'_, Self>,
    ) -> Option<usize>;
}
```

Expand description

Implement this trait to allow views to handle textual input when implementing an editor, field, etc.

Once your view implements this trait, you can use it to construct an [`ElementInputHandler<V>`](struct.ElementInputHandler.html "struct gpui::ElementInputHandler").
This input handler can then be assigned during paint by calling [`Window::handle_input`](struct.Window.html#method.handle_input "method gpui::Window::handle_input").

See [`InputHandler`](trait.InputHandler.html "trait gpui::InputHandler") for details on how to implement each method.

Required Methods[§](#required-methods)
--------------------------------------

[Source](../src/gpui/input.rs.html#12-18)

#### fn [text\_for\_range](#tymethod.text_for_range)( &mut self, range: [Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>, adjusted\_range: &mut [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>>, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, ) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[String](https://doc.rust-lang.org/nightly/alloc/string/struct.String.html "struct alloc::string::String")>

See [`InputHandler::text_for_range`](trait.InputHandler.html#tymethod.text_for_range "method gpui::InputHandler::text_for_range") for details

[Source](../src/gpui/input.rs.html#21-26)

#### fn [selected\_text\_range](#tymethod.selected_text_range)( &mut self, ignore\_disabled\_input: [bool](https://doc.rust-lang.org/nightly/std/primitive.bool.html), window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, ) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[UTF16Selection](struct.UTF16Selection.html "struct gpui::UTF16Selection")>

See [`InputHandler::selected_text_range`](trait.InputHandler.html#tymethod.selected_text_range "method gpui::InputHandler::selected_text_range") for details

[Source](../src/gpui/input.rs.html#29-33)

#### fn [marked\_text\_range](#tymethod.marked_text_range)( &self, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, ) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>>

See [`InputHandler::marked_text_range`](trait.InputHandler.html#tymethod.marked_text_range "method gpui::InputHandler::marked_text_range") for details

[Source](../src/gpui/input.rs.html#36)

#### fn [unmark\_text](#tymethod.unmark_text)(&mut self, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>)

See [`InputHandler::unmark_text`](trait.InputHandler.html#tymethod.unmark_text "method gpui::InputHandler::unmark_text") for details

[Source](../src/gpui/input.rs.html#39-45)

#### fn [replace\_text\_in\_range](#tymethod.replace_text_in_range)( &mut self, range: [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>>, text: &[str](https://doc.rust-lang.org/nightly/std/primitive.str.html), window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, )

See [`InputHandler::replace_text_in_range`](trait.InputHandler.html#tymethod.replace_text_in_range "method gpui::InputHandler::replace_text_in_range") for details

[Source](../src/gpui/input.rs.html#48-55)

#### fn [replace\_and\_mark\_text\_in\_range](#tymethod.replace_and_mark_text_in_range)( &mut self, range: [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>>, new\_text: &[str](https://doc.rust-lang.org/nightly/std/primitive.str.html), new\_selected\_range: [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>>, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, )

See [`InputHandler::replace_and_mark_text_in_range`](trait.InputHandler.html#tymethod.replace_and_mark_text_in_range "method gpui::InputHandler::replace_and_mark_text_in_range") for details

[Source](../src/gpui/input.rs.html#58-64)

#### fn [bounds\_for\_range](#tymethod.bounds_for_range)( &mut self, range\_utf16: [Range](https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html "struct core::ops::range::Range")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>, element\_bounds: [Bounds](struct.Bounds.html "struct gpui::Bounds")<[Pixels](struct.Pixels.html "struct gpui::Pixels")>, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, ) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Bounds](struct.Bounds.html "struct gpui::Bounds")<[Pixels](struct.Pixels.html "struct gpui::Pixels")>>

See [`InputHandler::bounds_for_range`](trait.InputHandler.html#tymethod.bounds_for_range "method gpui::InputHandler::bounds_for_range") for details

[Source](../src/gpui/input.rs.html#67-72)

#### fn [character\_index\_for\_point](#tymethod.character_index_for_point)( &mut self, point: [Point](struct.Point.html "struct gpui::Point")<[Pixels](struct.Pixels.html "struct gpui::Pixels")>, window: &mut [Window](struct.Window.html "struct gpui::Window"), cx: &mut [Context](struct.Context.html "struct gpui::Context")<'\_, Self>, ) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[usize](https://doc.rust-lang.org/nightly/std/primitive.usize.html)>

See [`InputHandler::character_index_for_point`](trait.InputHandler.html#tymethod.character_index_for_point "method gpui::InputHandler::character_index_for_point") for details

Dyn Compatibility[§](#dyn-compatibility)
----------------------------------------

This trait is **not** [dyn compatible](https://doc.rust-lang.org/nightly/reference/items/traits.html#dyn-compatibility).

*In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.*

Implementors[§](#implementors)
------------------------------