Action in gpui - Rust

[Docs.rs](/)

* [gpui-0.2.2](# "Zed's GPU-accelerated UI framework")

  + gpui 0.2.2
  + [Docs.rs crate page](/crate/gpui/0.2.2 "See gpui in docs.rs")
  + [Apache-2.0](https://spdx.org/licenses/Apache-2.0)

  + Links
  + [Homepage](https://gpui.rs)
  + [Repository](https://github.com/zed-industries/zed)
  + [crates.io](https://crates.io/crates/gpui "See gpui in crates.io")
  + [Source](/crate/gpui/0.2.2/source/ "Browse source of gpui-0.2.2")

  + Owners
  + [maxbrunsfeld](https://crates.io/users/maxbrunsfeld)
  + [mikayla-maki](https://crates.io/users/mikayla-maki)
  + [github:zed-industries:crates-io](https://crates.io/teams/github:zed-industries:crates-io)

  + Dependencies
  + - [anyhow ^1.0.86
      *normal*](/anyhow/^1.0.86/)
    - [async-task ^4.7
      *normal*](/async-task/^4.7/)
    - [backtrace ^0.3
      *normal*
      *optional*](/backtrace/^0.3/)
    - [blade-graphics ^0.7.0
      *normal*
      *optional*](/blade-graphics/^0.7.0/)
    - [blade-macros ^0.3.0
      *normal*
      *optional*](/blade-macros/^0.3.0/)
    - [blade-util ^0.3.0
      *normal*
      *optional*](/blade-util/^0.3.0/)
    - [bytemuck ^1
      *normal*
      *optional*](/bytemuck/^1/)
    - [gpui\_collections ^0.2.2
      *normal*](/gpui_collections/^0.2.2/)
    - [ctor ^0.4.0
      *normal*](/ctor/^0.4.0/)
    - [derive\_more ^0.99.17
      *normal*](/derive_more/^0.99.17/)
    - [etagere ^0.2
      *normal*](/etagere/^0.2/)
    - [futures ^0.3
      *normal*](/futures/^0.3/)
    - [gpui-macros ^0.2.2
      *normal*](/gpui-macros/^0.2.2/)
    - [gpui\_http\_client ^0.2.2
      *normal*](/gpui_http_client/^0.2.2/)
    - [image ^0.25.1
      *normal*](/image/^0.25.1/)
    - [inventory ^0.3.19
      *normal*](/inventory/^0.3.19/)
    - [itertools ^0.14.0
      *normal*](/itertools/^0.14.0/)
    - [libc ^0.2
      *normal*](/libc/^0.2/)
    - [log ^0.4.16
      *normal*](/log/^0.4.16/)
    - [lyon ^1.0
      *normal*](/lyon/^1.0/)
    - [num\_cpus ^1.13
      *normal*](/num_cpus/^1.13/)
    - [parking ^2.0.0
      *normal*](/parking/^2.0.0/)
    - [parking\_lot ^0.12.1
      *normal*](/parking_lot/^0.12.1/)
    - [pin-project ^1.1.10
      *normal*](/pin-project/^1.1.10/)
    - [postage ^0.5
      *normal*](/postage/^0.5/)
    - [profiling ^1
      *normal*](/profiling/^1/)
    - [rand ^0.9
      *normal*
      *optional*](/rand/^0.9/)
    - [raw-window-handle ^0.6
      *normal*](/raw-window-handle/^0.6/)
    - [gpui\_refineable ^0.2.2
      *normal*](/gpui_refineable/^0.2.2/)
    - [resvg ^0.45.0
      *normal*](/resvg/^0.45.0/)
    - [schemars ^1.0
      *normal*](/schemars/^1.0/)
    - [seahash ^4.1
      *normal*](/seahash/^4.1/)
    - [gpui\_semantic\_version ^0.2.2
      *normal*](/gpui_semantic_version/^0.2.2/)
    - [serde ^1.0.221
      *normal*](/serde/^1.0.221/)
    - [serde\_json ^1.0.144
      *normal*](/serde_json/^1.0.144/)
    - [slotmap ^1.0.6
      *normal*](/slotmap/^1.0.6/)
    - [smallvec ^1.6
      *normal*](/smallvec/^1.6/)
    - [smol ^2.0
      *normal*](/smol/^2.0/)
    - [stacksafe ^0.1
      *normal*](/stacksafe/^0.1/)
    - [strum ^0.27.2
      *normal*](/strum/^0.27.2/)
    - [gpui\_sum\_tree ^0.2.2
      *normal*](/gpui_sum_tree/^0.2.2/)
    - [taffy =0.9.0
      *normal*](/taffy/=0.9.0/)
    - [thiserror ^2.0.12
      *normal*](/thiserror/^2.0.12/)
    - [usvg ^0.45.0
      *normal*](/usvg/^0.45.0/)
    - [gpui\_util ^0.2.2
      *normal*](/gpui_util/^0.2.2/)
    - [gpui\_util\_macros ^0.2.2
      *normal*](/gpui_util_macros/^0.2.2/)
    - [uuid ^1.1.2
      *normal*](/uuid/^1.1.2/)
    - [waker-fn ^1.2.0
      *normal*](/waker-fn/^1.2.0/)
    - [backtrace ^0.3
      *dev*](/backtrace/^0.3/)
    - [gpui\_collections ^0.2.2
      *dev*](/gpui_collections/^0.2.2/)
    - [env\_logger ^0.11
      *dev*](/env_logger/^0.11/)
    - [gpui\_http\_client ^0.2.2
      *dev*](/gpui_http_client/^0.2.2/)
    - [lyon ^1.0
      *dev*](/lyon/^1.0/)
    - [pretty\_assertions ^1.3.0
      *dev*](/pretty_assertions/^1.3.0/)
    - [rand ^0.9
      *dev*](/rand/^0.9/)
    - [unicode-segmentation ^1.10
      *dev*](/unicode-segmentation/^1.10/)
    - [gpui\_util ^0.2.2
      *dev*](/gpui_util/^0.2.2/)
    - [as-raw-xcb-connection ^1
      *normal*
      *optional*](/as-raw-xcb-connection/^1/)
    - [ashpd ^0.11
      *normal*
      *optional*](/ashpd/^0.11/)
    - [blade-graphics ^0.7.0
      *normal*
      *optional*](/blade-graphics/^0.7.0/)
    - [blade-macros ^0.3.0
      *normal*
      *optional*](/blade-macros/^0.3.0/)
    - [blade-util ^0.3.0
      *normal*
      *optional*](/blade-util/^0.3.0/)
    - [bytemuck ^1
      *normal*
      *optional*](/bytemuck/^1/)
    - [calloop ^0.13.0
      *normal*](/calloop/^0.13.0/)
    - [calloop-wayland-source ^0.3.0
      *normal*
      *optional*](/calloop-wayland-source/^0.3.0/)
    - [cosmic-text ^0.14.0
      *normal*
      *optional*](/cosmic-text/^0.14.0/)
    - [filedescriptor ^0.8.2
      *normal*
      *optional*](/filedescriptor/^0.8.2/)
    - [flume ^0.11
      *normal*](/flume/^0.11/)
    - [zed-font-kit ^0.14.1-zed
      *normal*
      *optional*](/zed-font-kit/^0.14.1-zed/)
    - [oo7 ^0.5.0
      *normal*](/oo7/^0.5.0/)
    - [open ^5.2.0
      *normal*
      *optional*](/open/^5.2.0/)
    - [wayland-backend ^0.3.3
      *normal*
      *optional*](/wayland-backend/^0.3.3/)
    - [wayland-client ^0.31.2
      *normal*
      *optional*](/wayland-client/^0.31.2/)
    - [wayland-cursor ^0.31.1
      *normal*
      *optional*](/wayland-cursor/^0.31.1/)
    - [wayland-protocols ^0.31.2
      *normal*
      *optional*](/wayland-protocols/^0.31.2/)
    - [wayland-protocols-plasma ^0.2.0
      *normal*
      *optional*](/wayland-protocols-plasma/^0.2.0/)
    - [x11-clipboard ^0.9.3
      *normal*
      *optional*](/x11-clipboard/^0.9.3/)
    - [x11rb ^0.13.1
      *normal*
      *optional*](/x11rb/^0.13.1/)
    - [zed-xim ^0.4.0-zed
      *normal*
      *optional*](/zed-xim/^0.4.0-zed/)
    - [xkbcommon ^0.8.0
      *normal*
      *optional*](/xkbcommon/^0.8.0/)
    - [naga ^25.0
      *build*](/naga/^25.0/)
    - [pathfinder\_geometry ^0.5
      *normal*](/pathfinder_geometry/^0.5/)
    - [zed-scap ^0.0.8-zed
      *normal*
      *optional*](/zed-scap/^0.0.8-zed/)
    - [block ^0.1
      *normal*](/block/^0.1/)
    - [cocoa =0.26.0
      *normal*](/cocoa/=0.26.0/)
    - [cocoa-foundation =0.2.0
      *normal*](/cocoa-foundation/=0.2.0/)
    - [core-foundation =0.10.0
      *normal*](/core-foundation/=0.10.0/)
    - [core-foundation-sys ^0.8.6
      *normal*](/core-foundation-sys/^0.8.6/)
    - [core-graphics ^0.24
      *normal*](/core-graphics/^0.24/)
    - [core-text ^21
      *normal*](/core-text/^21/)
    - [core-video ^0.4.3
      *normal*](/core-video/^0.4.3/)
    - [zed-font-kit ^0.14.1-zed
      *normal*
      *optional*](/zed-font-kit/^0.14.1-zed/)
    - [foreign-types ^0.5
      *normal*](/foreign-types/^0.5/)
    - [log ^0.4.16
      *normal*](/log/^0.4.16/)
    - [gpui\_media ^0.2.2
      *normal*](/gpui_media/^0.2.2/)
    - [metal ^0.29
      *normal*](/metal/^0.29/)
    - [objc ^0.2
      *normal*](/objc/^0.2/)
    - [objc2 ^0.6
      *normal*
      *optional*](/objc2/^0.6/)
    - [objc2-metal ^0.3
      *normal*
      *optional*](/objc2-metal/^0.3/)
    - [bindgen ^0.71
      *build*](/bindgen/^0.71/)
    - [cbindgen ^0.28.0
      *build*](/cbindgen/^0.28.0/)
    - [naga ^25.0
      *build*](/naga/^25.0/)
    - [flume ^0.11
      *normal*](/flume/^0.11/)
    - [rand ^0.9
      *normal*](/rand/^0.9/)
    - [windows ^0.61
      *normal*](/windows/^0.61/)
    - [windows-core ^0.61
      *normal*](/windows-core/^0.61/)
    - [windows-numerics ^0.2
      *normal*](/windows-numerics/^0.2/)
    - [windows-registry ^0.5
      *normal*](/windows-registry/^0.5/)
    - [embed-resource ^3.0
      *build*](/embed-resource/^3.0/)

  + Versions

  + [**100%**
    of the crate is documented](/crate/gpui/0.2.2)
* [Platform](#)
  + [x86\_64-unknown-linux-gnu](/crate/gpui/0.2.2/target-redirect/gpui/trait.Action.html)
* [Feature flags](/crate/gpui/0.2.2/features "Browse available feature flags of gpui-0.2.2")

* [docs.rs](#)
  + [About docs.rs](/about)
  + [Badges](/about/badges)
  + [Builds](/about/builds)
  + [Metadata](/about/metadata)
  + [Shorthand URLs](/about/redirections)
  + [Download](/about/download)
  + [Rustdoc JSON](/about/rustdoc-json)
  + [Build queue](/releases/queue)
  + [Privacy policy](https://foundation.rust-lang.org/policies/privacy-policy/#docs.rs)

* [Rust](#)
  + [Rust website](https://www.rust-lang.org/)
  + [The Book](https://doc.rust-lang.org/book/)
  + [Standard Library API Reference](https://doc.rust-lang.org/std/)
  + [Rust by Example](https://doc.rust-lang.org/rust-by-example/)
  + [The Cargo Guide](https://doc.rust-lang.org/cargo/guide/)
  + [Clippy Documentation](https://doc.rust-lang.org/nightly/clippy)

[Action](#)
-----------

[gpui](../gpui/index.html)0.2.2
-------------------------------

[Action](#)
-----------

### [Sections](#)

* [Derive Macro](#derive-macro "Derive Macro")
* [Manual Implementation](#manual-implementation "Manual Implementation")

### [Required Methods](#required-methods)

* [boxed\_clone](#tymethod.boxed_clone "boxed_clone")
* [build](#tymethod.build "build")
* [name](#tymethod.name "name")
* [name\_for\_type](#tymethod.name_for_type "name_for_type")
* [partial\_eq](#tymethod.partial_eq "partial_eq")

### [Provided Methods](#provided-methods)

* [action\_json\_schema](#method.action_json_schema "action_json_schema")
* [deprecated\_aliases](#method.deprecated_aliases "deprecated_aliases")
* [deprecation\_message](#method.deprecation_message "deprecation_message")
* [documentation](#method.documentation "documentation")

### [Methods](#implementations)

* [as\_any](#method.as_any "as_any")

### [Trait Implementations](#trait-implementations)

* [Debug](#impl-Debug-for-dyn+Action "Debug")

### [Implementors](#implementors)

[In crate gpui](index.html)
---------------------------

[gpui](index.html)

Trait Action Copy item path
===========================

[Source](../src/gpui/action.rs.html#117-173)

```
pub trait Action: Any + Send {
    // Required methods
    fn boxed_clone(&self) -> Box<dyn Action>;
    fn partial_eq(&self, action: &dyn Action) -> bool;
    fn name(&self) -> &'static str;
    fn name_for_type() -> &'static str
       where Self: Sized;
    fn build(value: Value) -> Result<Box<dyn Action>>
       where Self: Sized;

    // Provided methods
    fn action_json_schema(_: &mut SchemaGenerator) -> Option<Schema>
       where Self: Sized { ... }
    fn deprecated_aliases() -> &'static [&'static str]
       where Self: Sized { ... }
    fn deprecation_message() -> Option<&'static str>
       where Self: Sized { ... }
    fn documentation() -> Option<&'static str>
       where Self: Sized { ... }
}
```

Expand description

Actions are used to implement keyboard-driven UI. When you declare an action, you can bind keys
to the action in the keymap and listeners for that action in the element tree.

To declare a list of simple actions, you can use the actions! macro, which defines a simple unit
struct action for each listed action name in the given namespace.

```
use gpui::actions;
actions!(editor, [MoveUp, MoveDown, MoveLeft, MoveRight, Newline]);
```

Registering the actions with the same name will result in a panic during `App` creation.

[§](#derive-macro)Derive Macro
------------------------------

More complex data types can also be actions, by using the derive macro for `Action`:

```
use gpui::Action;
#[derive(Clone, PartialEq, serde::Deserialize, schemars::JsonSchema, Action)]
#[action(namespace = editor)]
pub struct SelectNext {
    pub replace_newest: bool,
}
```

The derive macro for `Action` requires that the type implement `Clone` and `PartialEq`. It also
requires `serde::Deserialize` and `schemars::JsonSchema` unless `#[action(no_json)]` is
specified. In Zed these trait impls are used to load keymaps from JSON.

Multiple arguments separated by commas may be specified in `#[action(...)]`:

* `namespace = some_namespace` sets the namespace. In Zed this is required.
* `name = "ActionName"` overrides the action’s name. This must not contain `::`.
* `no_json` causes the `build` method to always error and `action_json_schema` to return `None`,
  and allows actions not implement `serde::Serialize` and `schemars::JsonSchema`.
* `no_register` skips registering the action. This is useful for implementing the `Action` trait
  while not supporting invocation by name or JSON deserialization.
* `deprecated_aliases = ["editor::SomeAction"]` specifies deprecated old names for the action.
  These action names should *not* correspond to any actions that are registered. These old names
  can then still be used to refer to invoke this action. In Zed, the keymap JSON schema will
  accept these old names and provide warnings.
* `deprecated = "Message about why this action is deprecation"` specifies a deprecation message.
  In Zed, the keymap JSON schema will cause this to be displayed as a warning.

[§](#manual-implementation)Manual Implementation
------------------------------------------------

If you want to control the behavior of the action trait manually, you can use the lower-level
`#[register_action]` macro, which only generates the code needed to register your action before
`main`.

```
use gpui::{SharedString, register_action};
#[derive(Clone, PartialEq, Eq, serde::Deserialize, schemars::JsonSchema)]
pub struct Paste {
    pub content: SharedString,
}

impl gpui::Action for Paste {
}

register_action!(Paste);
```

Required Methods[§](#required-methods)
--------------------------------------

[Source](../src/gpui/action.rs.html#119)

#### fn [boxed\_clone](#tymethod.boxed_clone)(&self) -> [Box](https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html "struct alloc::boxed::Box")<dyn [Action](trait.Action.html "trait gpui::Action")>

Clone the action into a new box

[Source](../src/gpui/action.rs.html#122)

#### fn [partial\_eq](#tymethod.partial_eq)(&self, action: &dyn [Action](trait.Action.html "trait gpui::Action")) -> [bool](https://doc.rust-lang.org/nightly/std/primitive.bool.html)

Do a partial equality check on this action and the other

[Source](../src/gpui/action.rs.html#125)

#### fn [name](#tymethod.name)(&self) -> &'static [str](https://doc.rust-lang.org/nightly/std/primitive.str.html)

Get the name of this action, for displaying in UI

[Source](../src/gpui/action.rs.html#128-130)

#### fn [name\_for\_type](#tymethod.name_for_type)() -> &'static [str](https://doc.rust-lang.org/nightly/std/primitive.str.html) where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Get the name of this action type (static)

[Source](../src/gpui/action.rs.html#134-136)

#### fn [build](#tymethod.build)(value: [Value](https://docs.rs/serde_json/1.0.145/x86_64-unknown-linux-gnu/serde_json/value/enum.Value.html "enum serde_json::value::Value")) -> [Result](type.Result.html "type gpui::Result")<[Box](https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html "struct alloc::boxed::Box")<dyn [Action](trait.Action.html "trait gpui::Action")>> where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Build this action from a JSON value. This is used to construct actions from the keymap.
A value of `{}` will be passed for actions that don’t have any parameters.

Provided Methods[§](#provided-methods)
--------------------------------------

[Source](../src/gpui/action.rs.html#139-144)

#### fn [action\_json\_schema](#method.action_json_schema)(\_: &mut [SchemaGenerator](https://docs.rs/schemars/1.0.4/x86_64-unknown-linux-gnu/schemars/generate/struct.SchemaGenerator.html "struct schemars::generate::SchemaGenerator")) -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<[Schema](https://docs.rs/schemars/1.0.4/x86_64-unknown-linux-gnu/schemars/schema/struct.Schema.html "struct schemars::schema::Schema")> where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Optional JSON schema for the action’s input data.

[Source](../src/gpui/action.rs.html#149-154)

#### fn [deprecated\_aliases](#method.deprecated_aliases)() -> &'static [&'static [str](https://doc.rust-lang.org/nightly/std/primitive.str.html)] where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

A list of alternate, deprecated names for this action. These names can still be used to
invoke the action. In Zed, the keymap JSON schema will accept these old names and provide
warnings.

[Source](../src/gpui/action.rs.html#158-163)

#### fn [deprecation\_message](#method.deprecation_message)() -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<&'static [str](https://doc.rust-lang.org/nightly/std/primitive.str.html)> where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Returns the deprecation message for this action, if any. In Zed, the keymap JSON schema will
cause this to be displayed as a warning.

[Source](../src/gpui/action.rs.html#167-172)

#### fn [documentation](#method.documentation)() -> [Option](https://doc.rust-lang.org/nightly/core/option/enum.Option.html "enum core::option::Option")<&'static [str](https://doc.rust-lang.org/nightly/std/primitive.str.html)> where Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

The documentation for this action, if any. When using the derive macro for actions
this will be automatically generated from the doc comments on the action struct.

Implementations[§](#implementations)
------------------------------------

[Source](../src/gpui/action.rs.html#183-188)[§](#impl-dyn+Action)

### impl dyn [Action](trait.Action.html "trait gpui::Action")

[Source](../src/gpui/action.rs.html#185-187)

#### pub fn [as\_any](#method.as_any)(&self) -> &dyn [Any](https://doc.rust-lang.org/nightly/core/any/trait.Any.html "trait core::any::Any")

Type-erase Action type.

Trait Implementations[§](#trait-implementations)
------------------------------------------------

[Source](../src/gpui/action.rs.html#175-181)[§](#impl-Debug-for-dyn+Action)

### impl [Debug](https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html "trait core::fmt::Debug") for dyn [Action](trait.Action.html "trait gpui::Action")

[Source](../src/gpui/action.rs.html#176-180)[§](#method.fmt)

#### fn [fmt](https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt)(&self, f: &mut [Formatter](https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html "struct core::fmt::Formatter")<'\_>) -> [Result](https://doc.rust-lang.org/nightly/core/fmt/type.Result.html "type core::fmt::Result")

Formats the value using the given formatter. [Read more](https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt)

Implementors[§](#implementors)
------------------------------

[Source](../src/gpui/action.rs.html#427-434)[§](#impl-Action-for-NoAction)

### impl [Action](trait.Action.html "trait gpui::Action") for [NoAction](struct.NoAction.html "struct gpui::NoAction")